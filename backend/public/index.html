<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color), #0a2f7a);
            color: white;
            padding: 6rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><circle cx="50" cy="50" r="30" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><circle cx="50" cy="50" r="20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></svg>');
            background-size: 100px 100px;
            opacity: 0.3;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            animation: fadeInUp 1s ease;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease 0.2s;
            animation-fill-mode: both;
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease 0.4s;
            animation-fill-mode: both;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .features-section {
            padding: 4rem 0;
            background-color: var(--background-color);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .feature-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .feature-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –≤ —É–≥–ª—É */
        .profile-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--white-color);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 0.7rem 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }
        
        .profile-button:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .profile-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .profile-content {
            background: white;
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        
        .profile-modal.active .profile-content {
            transform: scale(1);
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            font-weight: bold;
            color: white;
        }
        
        .profile-name {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .profile-email {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .profile-birthdate {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .profile-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .profile-button {
                top: 10px;
                right: 10px;
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <button class="profile-button" id="profileBtn">
        <span id="profileBtnText">–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>

    <!-- Hero —Å–µ–∫—Ü–∏—è -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                <p class="hero-subtitle">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å</p>
                <div class="hero-buttons">
                    <a href="/register" class="btn btn-accent" style="font-size: 1.1rem; padding: 1rem 2rem;">
                        –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </a>
                    <a href="/login" class="btn btn-secondary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                        –í–æ–π—Ç–∏
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π -->
    <section class="features-section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem;">
                –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
            </h2>
            <p style="text-align: center; color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 3rem;">
                –£–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –¥–ª—è –Ω–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            </p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéÇ</div>
                    <h3 class="feature-title">–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                    <p class="feature-description">
                        –ü–æ–ª—É—á–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
                    </p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üë§</div>
                    <h3 class="feature-title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <p class="feature-description">
                        –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
                    </p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3 class="feature-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <p class="feature-description">
                        –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-content">
            <div class="profile-avatar" id="profileAvatar">?</div>
            <h2 class="profile-name" id="profileName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            <p class="profile-email" id="profileEmail">-</p>
            <p class="profile-birthdate" id="profileBirthdate">-</p>
            <div class="profile-actions">
                <a href="/dashboard" class="btn btn-primary">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                <button class="btn btn-secondary" id="closeProfile">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="/js/common.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            checkBirthday();
            updateProfileButton();
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        async function updateProfileButton() {
            if (isAuthenticated()) {
                try {
                    const response = await apiRequest('/user/profile');
                    const user = response.user;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                    document.getElementById('profileBtnText').textContent = user.fullName.split(' ')[0];
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
                }
            }
        }
        
        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è
        document.getElementById('profileBtn').addEventListener('click', async function() {
            if (!isAuthenticated()) {
                redirect('/login');
                return;
            }
            
            const modal = document.getElementById('profileModal');
            
            try {
                const response = await apiRequest('/user/profile');
                const user = response.user;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                document.getElementById('profileName').textContent = user.fullName;
                document.getElementById('profileEmail').textContent = user.email;
                document.getElementById('profileBirthdate').textContent = '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ' + formatDate(user.birthDate);
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª—ã –≤ –∞–≤–∞—Ç–∞—Ä
                const initials = user.fullName
                    .split(' ')
                    .map(word => word.charAt(0))
                    .join('')
                    .toUpperCase()
                    .slice(0, 2);
                document.getElementById('profileAvatar').textContent = initials;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                modal.classList.add('active');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
                showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è', 'error');
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è
        document.getElementById('closeProfile').addEventListener('click', function() {
            document.getElementById('profileModal').classList.remove('active');
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.getElementById('profileModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.getElementById('profileModal').classList.remove('active');
            }
        });
    </script>
</body>
</html>
